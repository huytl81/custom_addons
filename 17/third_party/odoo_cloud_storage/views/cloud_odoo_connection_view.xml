<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2015-Present Webkul Software Pvt. Ltd. (<https://webkul.com/>) -->
<!-- See LICENSE file for full copyright and licensing details. -->
<!-- "License URL : <https://store.webkul.com/license.html/>" -->

<odoo>
		<record id="cloud_odoo_connection_mapping_tree_form" model="ir.ui.view">
			<field name="name">cloud.odoo.connection.form</field>
			<field name="model">cloud.odoo.connection</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Cloud Instance">
					<header>
							<button name="test_connection"
								type='object' 
								icon="fa-pencil-square-o" 
								class="oe_highlight" 
								string='Test Connection'/>
							<button name="synchronise_folder_data"
								type='object' 
								string = "Create Folder" 
								class="oe_highlight"
								invisible = "state != 'draft' or connection_status == False"/>
							<button name="synchronise_folder_data"
								type='object' 
								string = "Retry" 
								class="oe_highlight"
								invisible = "state != 'error'"/>
							<button name="synchronise_folder_data"
								type='object' 
								string = "Update Folder" 
								class="oe_highlight"
								invisible = "state != 'done'"/>
						<field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button type="object"
									name="action_open_folder_cloud"
									string = 'Open Folder In Cloud'
									class="oe_stat_button" icon="fa-cloud-upload"  
									invisible = "state != 'done'">
							</button>
							<button type="object"
							name="action_open_models"
							class="oe_stat_button" icon="fa-folder"  invisible = "model_count == 0">
								<field name="model_count" widget="statinfo" string="Attach Folders"/>
							</button>
							<button name="toggle_active" type="object" class="oe_stat_button" icon="fa-check">
								<field name="active" widget="boolean_button" options='{"terminology": "active"}'/>
							</button>
						</div>
						<field name="connection_status" invisible="1"/>
						<widget name="web_ribbon" text="Connected"
							invisible = "connection_status != True"/>
						<widget name="web_ribbon" text="Not Connected" bg_color="bg-danger"
							invisible = "connection_status != False"/>
						
						<div class="oe_title">
							<label for="name" string="Instance name"/>
							<h1><field name="name" placeholder="e.g. CloudName Drive Connector"/></h1>
						</div>
						<div class="oe_title">
							<label for="cloud_folder_name" string="Cloud Folder name"/>
							<h1><field name="cloud_folder_name" placeholder="e.g. odoo"/></h1>
						</div>
						<group name="cloud_data" col="2">
							 <field name='storage_type'/>
						</group>
						<group name="cloud_folder_data" col="2">
							<field name='cloud_folder_id' readonly="1"/>
							<field name="cloud_folder_path" readonly="1"/>
							<field name='delete_cloud_attachment'/>
						</group>
						<group name="color" col="4">
							<field name='color' widget='color'/>
							<field name='color_export' widget='color'/>
						</group>
						<notebook>
							<page string="Redirect Url" name='redirect_uri'>
								<div class="row mt16 o_settings_container">
									<div class="col-xs-12 col-md-6 o_setting_box">
										<div class="o_setting_right_pane">
										 <p class="oe_grey oe_edit_only">
											<strong>Message</strong>: This Query String Will Use For Redirect Url Of Cloud, 
											And This Should Be Unique For Every Connection
                    					</p>
										<label string="Url String" for="query_string"/>
											<div>
												<field name="query_string" class="oe_highlight" placeholder="Example: uniquestring" required='1' readonly = "state == 'done'"/>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-md-6 o_setting_box">
										<div class="o_setting_right_pane">
											<label string="Redirect Url" for="api_url"/>
											<div>
												<field name="api_url" placeholder="Example:http://localhost:8013/odoo_cloud_storage/{Url String}" force_save="1" readonly = "state == 'done'"/>
											</div>
										</div>
									</div>
								</div>
							</page>
							 <page string="API Credentials" name='api_credentials'>
								<div id="api_reference">
								</div>
								<div class="row mt16 o_settings_container">
									<div class="col-xs-12 col-md-6 o_setting_box">
										<div class="o_setting_right_pane">
											<label string="API User Name" for="api_key"/>
											<div>
												<field name="api_key" placeholder="Example: ussername" readonly = "state == 'done'"/>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-md-6 o_setting_box">
										<div class="o_setting_right_pane">
											<label string=" API Password" for="api_password"/>
											<div>
												<field name="api_password" placeholder="Example: apipassword" readonly = "state == 'done'"/>
											</div>
										</div>
									</div>
								</div>
							</page>
						</notebook>
					</sheet>
					<footer>
					</footer>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>

		<record id="cloud_odoo_connection_mapping_tree" model="ir.ui.view">
			<field name="name">cloud.odoo.connection.tree</field>
			<field name="model">cloud.odoo.connection</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Folder Mapping">
					<field name="name"/>
					<field name="cloud_folder_name"/>
					<field name="state" widget="badge" decoration-warning="state == 'draft'" decoration-success="state == 'done'" decoration-danger="state == 'error'" optional="show"/>
					<field name="create_uid" widget="many2one_avatar_user"/>
					<field name="storage_type" readonly="1"/>
					<field name="create_date" readonly="1"/>
					<field name="write_date" readonly="1"/>
				</tree>
			</field>
		</record>

  
		<record id="cloud_odoo_connection_search" model="ir.ui.view">
			<field name="name">cloud.odoo.connection.search</field>
			<field name="model">cloud.odoo.connection</field>
			<field name="arch" type="xml">
				<search string="Connection">
					<field name="name" filter_domain="[('name','ilike',self)]"/>
					<field name='cloud_folder_name'/>
					<group expand="0" string="Group By">
						<filter string="Storage Type" name="group_by_storage" context="{'group_by':'storage_type'}"/>
					</group>
				</search>
			</field>
		</record>

		<record id="cloud_odoo_connection_mapping" model="ir.actions.act_window">
			<field name="name">Cloud Odoo Connection</field>
			<field name="res_model">cloud.odoo.connection</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{"search_default_group_by_storage":0}</field>
			<field name="view_id" ref="cloud_odoo_connection_mapping_tree"/>
			<field name="search_view_id" ref="cloud_odoo_connection_search"/>
		</record>
</odoo>
