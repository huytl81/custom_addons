<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2015-Present Webkul Software Pvt. Ltd. (<https://webkul.com/>) -->
<!-- See LICENSE file for full copyright and licensing details. -->
<!-- "License URL : <https://store.webkul.com/license.html/>" -->

<odoo>
	<data>
		<record id="storage_folder_form" model="ir.ui.view">
			<field name="name">cloud.folder.mapping.form</field>
			<field name="model">cloud.folder.mapping</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Folder">
					<header>
						<button name="create_server_action_for_upload"
								type='object' 
								string = "Action For Upload" 
								class="oe_highlight"
								invisible = "state != 'done' or upload_action != 0"/>
						<button name="create_server_action_for_download"
								type='object' 
								string = "Action For Download" 
								class="oe_highlight"
								invisible = "state != 'done' or download_action != 0" />
						<button name="synchronise_folder_data"
								type='object' 
								string = "Create Folder" 
								class="oe_highlight"
								invisible = "state != 'draft'" />
						<button name="synchronise_folder_data"
							type='object' 
							string = "Retry" 
							class="oe_highlight"
							invisible = "state != 'error'" />
						<button name="synchronise_folder_data"
							type='object' 
							string = "Update Folder" 
							class="oe_highlight"
							invisible = "state != 'done'"/>
						<button name="synchronise_folder_files"
							type='object' 
							string = "Export Attachments" 
							class="oe_highlight"
							invisible = "state != 'done'"/>
						<field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button type="object"
								name="action_open_folder_cloud"
								string = 'Open Folder In Cloud'
								class="oe_stat_button" icon="fa-cloud-upload"  
								invisible = "state != 'done'">
							</button>
							<button type="object"
							name="action_open_files"
							class="oe_stat_button" icon="fa-file"  invisible = "file_count == 0">
								<field name="file_count" widget="statinfo" string="Attach Files"/>
							</button>
						</div>
						<div class="oe_title">
							<label for="name" string="Folder name" class="oe_edit_only"/>
							<h1><field name="name" placeholder="e.g. Folder Name"/></h1>
						</div>
						<group col="4">
							<field name="complete_name" string="Cloud Structure"/>
							<field name="parent_id" class="oe_inline" domain="[('instance_id','=',instance_id),('id','!=',id)]" 

							 readonly = "state == 'done'"
							 invisible = "state == 'done' and parent_id == False"
							 />
							<field name='is_default'/>
							<field name='run_cron' invisible = "state != 'done'"/>
							<field name='id' invisible='1'/>
						</group>
		   
						<group name="folder_model" col="4">
							 <field name='instance_id' string="Cloud Connection" readonly = "state == 'done'"/>
							 <field name="model_id"  readonly = "state == 'done'"/>          
						</group>
						<group name="folder_folder" col="4">
							<field name="folder_id" invisible = "folder_id == False" readonly='1'/> 
							<field name="folder_path" invisible = "folder_path == False" readonly='1'/>
						</group>
						<group>
							<field name="model_name" invisible="1"/> 
							<field name="model_domain" widget="domain" options="{'model': 'model_name'}" invisible = "model_id == False"/>
						</group>
						<div class="class_wk" style="height:100px;">
							<field name="download_action" invisible="1"/>
							<field name="upload_action" invisible="1"/>
						</div>
					</sheet>
					<footer>
					 </footer>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					 </div>
				</form>
			</field>
		</record>

		<record id="storage_folder_tree" model="ir.ui.view">
			<field name="name">cloud.folder.mapping.tree</field>
			<field name="model">cloud.folder.mapping</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Folder Mapping">
					<field name="complete_name"/>
					<field name="folder_path"/>
					<field name="folder_id"/>
					<field name="instance_id" readonly="1"/>
					<field name="write_date" readonly="1"/>
				</tree>
			</field>
		</record>

		<record id="storage_folder_search" model="ir.ui.view">
			<field name="name">cloud.folder.mapping.search</field>
			<field name="model">cloud.folder.mapping</field>
			<field name="arch" type="xml">
				<search string="Folder">
					<field name="name" filter_domain="[('name','ilike',self)]"/>
					<field name="model_id"/>
					<field name="storage_type"/>
					<group expand="0" string="Group By">
						<filter string="Storage Type" name="group_by_storage" context="{'group_by':'storage_type'}"/>
						<filter string="Connection Name" name="group_by_instance" context="{'group_by':'instance_id'}"/>
					</group>
				</search>
			</field>
		</record>

		<record id="storage_odoo_folder_mapping" model="ir.actions.act_window">
			<field name="name">Storage Odoo Folder Mapping</field>
			<field name="res_model">cloud.folder.mapping</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{"search_default_group_by_storage":1,"search_default_group_by_instance":1}</field>
			<field name="search_view_id" ref = "storage_folder_search"/>
			<field name="view_id" ref="storage_folder_tree"/>
		</record>
	
	</data>
</odoo>

