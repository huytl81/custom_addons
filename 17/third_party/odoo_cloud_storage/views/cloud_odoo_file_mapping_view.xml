<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2015-Present Webkul Software Pvt. Ltd. (<https://webkul.com/>) -->
<!-- See LICENSE file for full copyright and licensing details. -->
<!-- "License URL : <https://store.webkul.com/license.html/>" -->

<odoo>
	<data>
		<record id="cloud_odoo_file_mapping_form" model="ir.ui.view">
			<field name="name">cloud.odoo.file.mapping.form</field>
			<field name="model">cloud.odoo.file.mapping</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Cloud File Mapping" edit='false' create='false'>
					<header>
						<button name="synchronise_file_data"
									type='object' 
									string = "Retry" 
									class="oe_highlight"
									invisible = "state != 'error'" />
						
						<!-- <button name="give_permission"
									type='object' 
									string = "Permission" 
									class="oe_highlight"/> -->
						<field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<group col='2' name='url_data'>
							<field name="file_id"/>
							<field name="file_url" widget='url'/>
						</group>
	 					<group col='4' name="file_data">
							<field name="instance_id"/>
							<field name="attachment_id"/>
							<field name="folder_id"/>
						</group>
						<notebook>
							<page name='folder_data' string='Record Id And Folder Data'>
								<group col="4" name='record_data'>
									<field name="record_id"/>
									<field name="record_folder_id"/>
									<field name="record_folder_name"/>
									<field name="record_folder_path"/>
								</group>
							</page>
						</notebook>
					</sheet>
					<footer>
					</footer>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>

		<record id="cloud_odoo_file_mapping_tree" model="ir.ui.view">
			<field name="name">cloud.odoo.file.mapping.tree</field>
			<field name="model">cloud.odoo.file.mapping</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Cloud File Mapping" create='false'>
					<field name="attachment_id"/>
					<field name="folder_id"/>
					<field name="file_id"/>
					<field name="instance_id"/>
					<field name="write_date" readonly="1"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<record id="cloud_odoo_file_mapping_search" model="ir.ui.view">
			<field name="name">cloud.odoo.file.mapping.search</field>
			<field name="model">cloud.odoo.file.mapping</field>
			<field name="arch" type="xml">
				<search string="Folder">
					<field name="attachment_id"/>
					<field name="state"/>
					<field name="file_url"/>
					<field name="storage_type"/>
					<group expand="0" string="Group By">
						<filter string="Instance Name" name="group_by_instance" context="{'group_by':'instance_id'}"/>
						<filter string="Folder Name" name="group_by_folder" context="{'group_by':'folder_id'}"/>
					</group>
				</search>
			</field>
		</record>

		<record id="menu_cloud_odoo_folder_mapping" model="ir.actions.act_window">
			<field name="name">Storage Odoo File Mapping</field>
			<field name="res_model">cloud.odoo.file.mapping</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{"search_default_group_by_instance":1,
									"search_default_group_by_folder":1}
			</field>
			<field name="search_view_id" ref = "cloud_odoo_file_mapping_search"/>
			<field name="view_id" ref="cloud_odoo_file_mapping_tree"/>
		</record>
	</data>
</odoo>

