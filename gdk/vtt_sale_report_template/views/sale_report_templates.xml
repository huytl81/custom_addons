<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!--Modified template for TienDatCo-->
    <!--Template Layout-->
    <data noupdate="1">
        <!--Background layout-->
        <template id="vtt_layout_background">
            <div class="header" style="font-family: Arial, Helvetica, sans-serif !important;">
                <div class="o_background_header">
                <div class="float-right">
                    <h3 class="mt0 text-right" t-field="company.report_header"/>
                </div>
                <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" class="float-left" alt="Logo" style="max-width:15%;"/>
                <div class="float-left company_address" style="width:80%;">
                    <div>
                        <strong t-field="company.partner_id.name" style="font-family: Arial, Helvetica, sans-serif !important; color: #000000; font-size: 13pt;"/>
                    </div>
                    <!--<span t-field="company.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: true}"/>-->
                    <table style="font-size: 9pt;">
                      <tr>
                        <td style="width: 10%"><strong>Trụ sở:</strong></td>
                        <td colspan="4">Số 48, ngõ 68/137, đường Nguyễn Văn Linh, tổ 14, phường Thạch Bàn, quận Long Biên, Hà Nội</td>
                      </tr>
                      <tr>
                        <td style="width: 10%"><strong>VP Hà Nội:</strong></td>
                        <td colspan="4"> Số C3-2B/No4, Phường Thạch Bàn, Quận Long Biên, Hà Nội.</td>
                      </tr>
                      <tr>
                        <td style="width: 10%"><strong>Tel:</strong></td>
                        <td style="width: 25%">024-62913207/62913307</td>
                        <td style="width: 10%"><strong>Fax:</strong></td>
                        <td style="width: 25%">024-36 757 313</td>
                        <td></td>
                      </tr>
                      <tr>
                        <td style="width: 10%"><strong>VP Hồ Chí Minh:</strong></td>
                        <td colspan="4"> Số 3A/ 10 đường Trần Văn Giàu, xã Phạm Văn Hai, huyện Bình Chánh, thành phố Hồ Chí Minh</td>
                      </tr>
                      <tr>
                        <td style="width: 10%"><strong>Hotline:</strong></td>
                        <td style="width: 25%">0913 281 688</td>
                      </tr>
                      <tr>
                        <td style="width: 10%"><strong>Website:</strong></td>
                        <td style="width: 25%">www.tiendatco.com.vn</td>
                        <td style="width: 10%"><strong>Email:</strong></td>
                        <td style="width: 25%">info@tiendatco.com.vn</td>
                        <td></td>
                      </tr>
                    </table>
                </div>
                <div class="clearfix mb8"/>
                </div>
            </div>

            <div class="article o_report_layout_background" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
                <t t-call="web.address_layout"/>
                <t t-raw="0"/>
            </div>

            <div class="footer o_background_footer" style="font-family: Arial, Helvetica, sans-serif !important; position: relative; overflow: visible; padding-top: 8px;">
                <div class="text-center">
                    <ul class="list-inline" style="position:relative; z-index: 10; margin-bottom: 5px;">
                        <li t-if="company.phone" class="list-inline-item"><i class="fa fa-phone" role="img" aria-label="Phone" title="Phone"/> <span t-field="company.phone"/></li>
                        <li t-if="company.email" class="list-inline-item"><i class="fa fa-at" role="img" aria-label="Email" title="Email"/> <span t-field="company.email"/></li>
                        <li t-if="company.website" class="list-inline-item"><i class="fa fa-globe" role="img" aria-label="Website" title="Website"/> <span t-field="company.website"/></li>
                        <li t-if="company.vat" class="list-inline-item"><i class="fa fa-building-o" role="img" aria-label="Fiscal number"/><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                    </ul>
                    <!--<div t-field="company.report_footer"/>-->
                    <div style="position: absolute; top: 0; width: 100%;">
                      <img src="/ev_allure_usermenu/static/src/img/tiendat_footer.png" style="height: 50px; width: 100%;"/>
                    </div>
                    <div t-if="report_type == 'pdf'" class="text-muted" style="text-align: right;">
                        Page:
                        <span class="page"/>
                        of
                        <span class="topage"/>
                    </div>
                </div>
            </div>
        </template>

        <!--External layout-->
        <template id="vtt_external_layout">
            <t t-if="not o" t-set="o" t-value="doc"/>

            <t t-if="not company">
                <!-- Multicompany -->
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>

            <!--<t t-if="company.external_report_layout_id" t-call="{{company.external_report_layout_id.key}}"><t t-raw="0"/></t>-->
            <t t-call="vtt_sale_report_template.vtt_layout_background"><t t-raw="0"/></t>
        </template>
    </data>

    <!--Report Document-->
    <data noupdate="1">
        <!--Report template-->
        <template id="vtt_report_sale_doc">
            <t t-call="web.external_layout">
                <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
                <h2 class="mt0 mb8" style="font-family: Arial, Helvetica, sans-serif !important;">
                    <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                        <span t-if="doc.state not in ['draft','sent']">Order # </span>
                        <span t-if="doc.state in ['draft','sent']">Quotation # </span>
                    </t>
                    <t t-if="env.context.get('proforma', False) or is_pro_forma">
                        <span>Pro-Forma Invoice # </span>
                    </t>
                    <span t-field="doc.name"/>
                </h2>

                <table style="width: 100%; font-family: Arial, Helvetica, sans-serif !important;">
                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Customer</strong>:</td>
                    <!--<td style="width: 50%"><span t-field="doc.partner_id.display_name"/></td>-->
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.name"/></span>
                    <span t-if="not doc.partner_id.parent_id"><span t-field="doc.partner_id.name"/></span>
                    </td>
                    <td style="width: 15%"><strong>Salesperson</strong>:</td>
                    <td style="width: 20%"><span t-field="doc.user_id"/></td>
                  </tr>
                  <tr>
                    <td style="width: 15%"><strong>Cc</strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.name"/><span t-if="doc.partner_id.mobile"> - <span t-field="doc.partner_id.mobile"/></span></span>
                    </td>
                    <td style="width: 15%"><strong>Mobile</strong>:</td>
                    <td style="width: 20%"><span t-field="doc.user_id.mobile"/></td>
                  </tr>
                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Address</strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.street"><span t-field="doc.partner_id.street"/></span><span t-if="doc.partner_id.street2">&#44;&#160;<span t-field="doc.partner_id.street2"/></span><span t-if="doc.partner_id.state_id">&#44;&#160;<span t-field="doc.partner_id.state_id.display_name"/></span><span t-if="doc.partner_id.country_id">&#44;&#160;<span t-field="doc.partner_id.country_id.display_name"/></span></td>
                    <td style="width: 15%"><strong>Email</strong>:</td>
                    <td style="width: 20%"><span t-field="doc.user_id.email"/></td>
                  </tr>
                  <tr>
                    <td style="width: 15%"><strong><t t-esc="doc.company_id.country_id.vat_label or 'Tax ID'"/></strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.vat"/></span>
                    <span t-if="not doc.partner_id.parent_id"><span t-field="doc.partner_id.vat"/></span></td>
                    <td style="width: 15%"><strong><span t-if="doc.date_order and doc.state not in ['draft','sent']">Date Ordered</span><span t-if="doc.date_order and doc.state in ['draft','sent']">Quotation Date</span></strong>:</td>
                    <td style="width: 20%"><span t-esc="doc.date_order.strftime('%d/%m/%Y')"/></td>
                  </tr>
                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Email</strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.email"/></span>
                    <span t-if="not doc.partner_id.parent_id"><span t-field="doc.partner_id.email"/></span></td>
                    <td style="width: 15%"><strong><span t-if="doc.validity_date and doc.state in ['draft', 'sent']">Expiration Date:</span></strong></td>
                    <td style="width: 20%"><span t-if="doc.validity_date and doc.state in ['draft', 'sent']"><span t-field="doc.validity_date"/></span></td>
                  </tr>
                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Phone</strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.phone"/></span>
                    <span t-if="not doc.partner_id.parent_id"><span t-field="doc.partner_id.phone"/></span></td>
                    <td style="width: 15%"></td>
                    <td style="width: 20%"></td>
                  </tr>
                </table>

                <p></p>
                <p> </p>

                <div class="page" style="font-family: Arial, Helvetica, sans-serif !important;">
                    <div class="oe_structure"/>

                    <div t-if="doc.client_order_ref != '' or doc.payment_term_id != False" class="row mb32" id="extra_informations">
                        <div t-if="doc.client_order_ref" class="col-auto mw-100 mb-2">
                            <strong>Your Reference:</strong> <span t-field="doc.client_order_ref"/>
                            <!--<p class="m-0" t-field="doc.client_order_ref"/>-->
                        </div>
                        <div name="payment_term" t-if="doc.payment_term_id" class="col-auto mw-100 mb-2">
                            <strong>Payment Terms:</strong> <span t-field="doc.payment_term_id"/>
                            <!--<p class="m-0" t-field="doc.payment_term_id"/>-->
                        </div>
                    </div>

                    <!-- Is there a discount on at least one line? -->
                    <t t-set="display_discount" t-value="any([l.discount for l in doc.order_line])"/>

                    <table class="table table-sm o_main_table">
                        <thead>
                            <tr>
                                <!-- TODO: remove in master -->
                                <t t-set="colspan" t-value="8"/>
                                <th class="text-center" style="width:3%">STT</th>
                                <th class="text-center" style="width:21%">Name</th>
                                <th class="text-center" style="width:27%">Description</th>
                                <th class="text-center" style="width:7%">Quantity</th>
                                <th class="text-center" style="width:7%">UoM</th>
                                <th class="text-center" style="width:10%">Unit Price</th>
                                <th t-if="display_discount" style="width:5%" class="text-right" groups="sale.group_discount_per_so_line">
                                    <span>Disc.(%)</span>
                                    <!-- TODO: remove in master -->
                                    <t t-set="colspan" t-value="colspan+1"/>
                                </th>
                                <!--<th class="text-right" style="width:10%">Taxes</th>-->
                                <th class="text-center" style="width:15%">
                                    <t groups="account.group_show_line_subtotals_tax_excluded">Amount</t>
                                    <t groups="account.group_show_line_subtotals_tax_included">Total Price</t>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="sale_tbody">

                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="r_number" t-value="0"/>

                            <t t-foreach="doc.order_line" t-as="line">

                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                <t t-set="r_number" t-value="r_number + 1"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type">
                                        <td style="text-align: center;"><span t-esc="r_number"/></td>
                                        <td><span t-field="line.product_id.name"/></td>
                                        <td><span t-field="line.name"/></td>
                                        <td class="text-right"><span t-field="line.product_uom_qty"/></td>
                                        <td class="text-right"><span t-field="line.product_uom" groups="uom.group_uom"/></td>
                                        <td class="text-right">
                                            <span t-field="line.price_unit"/>
                                        </td>
                                        <td t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line">
                                            <span t-field="line.discount"/>
                                        </td>
                                        <!--<td class="text-right">
                                            <span t-esc="', '.join(map(lambda x: (x.name or x.description), line.tax_id))"/>
                                        </td>-->
                                        <td class="text-right o_price_total">
                                            <span t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99">
                                            <span t-field="line.name"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99">
                                            <span t-field="line.name"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or doc.order_line[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td colspan="99">
                                            <strong class="mr16">Subtotal</strong>
                                            <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix">
                        <div id="total" class="row" name="total" style="margin-right:12px;">
                            <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                                <table class="table table-sm">
                                    <tr class="border-black o_subtotal">
                                        <td style="white-space: nowrap;"><strong>Subtotal</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="doc.amount_by_group" t-as="amount_by_group">
                                        <tr style="white-space: nowrap;">
                                            <t t-if="amount_by_group[3] == 1 and doc.amount_untaxed == amount_by_group[2]">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                    <span>&amp;nbsp;<span>on</span>&amp;nbsp;<t t-esc="amount_by_group[2]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/></span>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </t>
                                            <t t-else="">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total" style="">
                                        <td style="white-space: nowrap;"><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <p t-field="doc.note"/>
                    <p t-if="doc.payment_term_id.note">
                        <span t-field="doc.payment_term_id.note"/>
                    </p>
                    <p id="fiscal_position_remark" t-if="doc.fiscal_position_id and doc.fiscal_position_id.sudo().note">
                        <strong>Fiscal Position Remark:</strong>
                        <span t-field="doc.fiscal_position_id.sudo().note"/>
                    </p>

                    <div t-if="doc.signature" class="ml16 mr16" name="signature">
                        <div class="offset-8">
                            <strong>Signature</strong>
                        </div>
                        <div class="offset-8">
                            <img t-att-src="image_data_uri(doc.signature)" style="max-height: 4cm; max-width: 8cm;"/>
                        </div>
                        <div class="offset-8 text-center">
                            <p t-field="doc.signed_by"/>
                        </div>
                    </div>

                    <div class="oe_structure"/>
                </div>
            </t>
        </template>

        <!--Safi template with Image-->
        <template id="vtt_report_sale_doc_safi_template">
            <t t-call="web.external_layout">
                <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
                <h1 class="mt0 mb8" style="font-family: Arial, Helvetica, sans-serif !important; text-align: center;">
                    <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                        <span t-if="doc.state not in ['draft','sent']">Order # </span>
                        <span t-if="doc.state in ['draft','sent']">Quotation # </span>
                    </t>
                    <t t-if="env.context.get('proforma', False) or is_pro_forma">
                        <span>Pro-Forma Invoice # </span>
                    </t>
                    <!--<span t-field="doc.name"/>-->
                </h1>

                <!--Information Table-->
                <table style="width: 100%; font-family: Arial, Helvetica, sans-serif !important; border: 1px solid;">
                  <!--Customer Info-->
                  <tr style="background:transparent;">
                    <td style="width: 10%; padding-left: 10px; border-bottom: 1px dotted;"><strong>Customer</strong></td>
                    <td style="width: 55%; border-bottom: 1px dotted;">:<![CDATA[&nbsp;]]><span t-field="doc.partner_id.name"/></td>
                    <td style="width: 4%; border-bottom: 1px dotted;"/>
                    <td style="width: 8%; border-bottom: 1px dotted; padding-left: 5px; border-left: 1px dotted;"><strong>Date Ordered</strong></td>
                    <td style="width: 20%; border-bottom: 1px dotted;">:<![CDATA[&nbsp;]]><span t-field="doc.date_order" t-options='{"widget": "date"}'/></td>
                  </tr>
                  <!--Customer Company-->
                  <tr style="background:transparent;">
                    <td style="width: 10%; padding-left: 10px; border-bottom: 1px dotted;"><strong>Company</strong></td>
                    <td style="width: 55%; border-bottom: 1px dotted;">:<![CDATA[&nbsp;]]><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.name"/></span>
                    </td>
                    <td style="width: 4%; border-bottom: 1px dotted;"/>
                    <td style="width: 8%; padding-left: 5px; border-bottom: 1px dotted; border-left: 1px dotted;"></td>
                    <td style="width: 20%; border-bottom: 1px dotted;"></td>
                  </tr>
                  <!--Address Info-->
                  <tr style="background:transparent;">
                    <td style="width: 10%; padding-left: 10px; border-bottom: 1px dotted;"><strong>Address</strong></td>
                    <td style="width: 55%; border-bottom: 1px dotted;">:<![CDATA[&nbsp;]]><span t-if="doc.partner_id.street"><span t-field="doc.partner_id.street"/></span><span t-if="doc.partner_id.street2">, <span t-field="doc.partner_id.street2"/></span><span t-if="doc.partner_id.state_id">, <span t-field="doc.partner_id.state_id.display_name"/></span><span t-if="doc.partner_id.country_id">, <span t-field="doc.partner_id.country_id.display_name"/></span></td>
                    <td style="width: 4%; border-bottom: 1px dotted;"/>
                    <td style="width: 8%; padding-left: 5px; border-bottom: 1px dotted; border-left: 1px dotted;"><strong>No.</strong></td>
                    <td style="width: 20%; border-bottom: 1px dotted;">:<![CDATA[&nbsp;]]><span t-field="doc.name"/></td>
                  </tr>
                  <!--Phone Info-->
                  <tr style="background:transparent;">
                    <td style="width: 10%; padding-left: 10px;"><strong>Phone</strong></td>
                    <td style="width: 55%">:<![CDATA[&nbsp;]]><span t-field="doc.partner_id.phone"/></td>
                    <td style="width: 4%"/>
                    <td style="width: 8%; padding-left: 5px; border-left: 1px dotted;"><strong># Pages</strong></td>
                    <td style="width: 20%">:<![CDATA[&nbsp;]]></td>
                  </tr>
                </table>

                <p/>
                <p style="font-family: Arial, Helvetica, sans-serif !important;"><b>Công ty CP bảo hộ lao động Safi</b> chân thành cảm ơn Quý khách hàng đã quan tâm đến sản phẩm của chúng tôi. Chúng tôi xin gửi tới Quý khách hàng báo giá trang thiết bị bảo hộ lao động như sau:</p>

                <!--Products Table-->
                <div class="page" style="font-family: Arial, Helvetica, sans-serif !important;">
                    <div class="oe_structure"/>

                    <!-- Is there a discount on at least one line? -->
                    <t t-set="display_discount" t-value="any([l.discount for l in doc.order_line])"/>

                    <table class="table table-sm o_main_table" style="border: 1px solid;">
                        <thead>
                            <tr>
                                <t t-set="colspan" t-value="8"/>
                                <th class="text-center" style="width:3%; border: 1px solid;">STT</th>
                                <th class="text-center" style="width:30%; border: 1px solid;">Description</th>
                                <th class="text-center" style="width:21%; border: 1px solid;">Image</th>
                                <th class="text-center" style="width:8%; border: 1px solid;">UoM</th>
                                <th class="text-center" style="width:8%; border: 1px solid;">Quantity</th>
                                <th class="text-center" style="width:11%; border: 1px solid;">Unit Price</th>
                                <th class="text-center" style="width:13%; border: 1px solid;">Amount</th>
                            </tr>
                        </thead>
                        <!--Products Table body-->
                        <tbody class="sale_tbody">

                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="r_number" t-value="0"/>

                            <t t-foreach="doc.order_line" t-as="line">

                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                <!--<t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>-->
                                <!--<t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>-->

                                <t t-set="r_number" t-value="r_number + 1"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type">
                                        <td style="text-align: center; border: 1px solid;"><span t-esc="r_number"/></td>
                                        <td style="border: 1px solid;"><span t-field="line.name"/></td>
                                        <td style="text-align: center; border: 1px solid;"><t t-if="line.product_id.image_1920">
                                          <!--<span t-field="line.product_id.image_1920" t-options='{"widget": "image", "class": "o_image_64_cover"}'/>-->
                                          <div style="max-width: 80px !important; max-height: 80px !important; text-align: center;" class="text-center">
                                            <!--<span t-field="line.product_id.image_1920" t-options='{"widget": "image", "class": "o_image_128_max"}'/>-->
                                            <img t-att-src="image_data_uri(line.product_id.image_1920)" style="max-width: 80px !important; max-height: 80px !important;"/>
                                          </div>
                                          </t></td>
                                        <td class="text-right" style="border: 1px solid;"><span t-field="line.product_uom" groups="uom.group_uom"/></td>
                                        <td class="text-right" style="border: 1px solid;"><span t-field="line.product_uom_qty"/></td>
                                        <td class="text-right" style="border: 1px solid;">
                                            <span t-field="line.price_unit"/>
                                        </td>
                                        <!--<td class="text-right">
                                            <span t-esc="', '.join(map(lambda x: (x.name or x.description), line.tax_id))"/>
                                        </td>-->
                                        <td class="text-right" style="border: 1px solid;">
                                            <span t-field="line.price_subtotal"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99" style="border: 1px solid;">
                                            <span t-field="line.name"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99" style="border: 1px solid;">
                                            <span t-field="line.name"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or doc.order_line[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td colspan="99" style="border: 1px solid;">
                                            <strong class="mr16">Subtotal</strong>
                                            <!--<span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>-->
                                            <span t-esc="current_subtotal"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix">
                        <div id="total" class="row" name="total">
                            <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                                <table class="table table-sm">
                                    <tr class="border-black o_subtotal">
                                        <td style="white-space: nowrap;"><strong>Subtotal</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="doc.amount_by_group" t-as="amount_by_group">
                                        <tr style="white-space: nowrap;">
                                            <t t-if="amount_by_group[3] == 1 and doc.amount_untaxed == amount_by_group[2]">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                    <span>&amp;nbsp;<span>on</span>&amp;nbsp;<t t-esc="amount_by_group[2]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/></span>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </t>
                                            <t t-else="">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total" style="">
                                        <td style="white-space: nowrap;"><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <p t-field="doc.note"/>
                    <p t-if="doc.payment_term_id.note">
                        <span t-field="doc.payment_term_id.note"/>
                    </p>
                    <p id="fiscal_position_remark" t-if="doc.fiscal_position_id and doc.fiscal_position_id.sudo().note">
                        <strong>Fiscal Position Remark:</strong>
                        <span t-field="doc.fiscal_position_id.sudo().note"/>
                    </p>

                    <div t-if="doc.signature" class="ml16 mr16" name="signature">
                        <div class="offset-8">
                            <strong>Signature</strong>
                        </div>
                        <div class="offset-8">
                            <img t-att-src="image_data_uri(doc.signature)" style="max-height: 4cm; max-width: 8cm;"/>
                        </div>
                        <div class="offset-8 text-center">
                            <p t-field="doc.signed_by"/>
                        </div>
                    </div>

                    <p> </p>

                    <!--Salesman Sign-->
                    <br/>
                    <div id="responsible" class="row mt32 mb32 text-center">
                        <div class="col-7 bm-2">
                        </div>
                        <div class="col-5 bm-2">
                            <strong>Salesman</strong>
                            <p style="padding-top: 100px;"><strong t-field="doc.user_id"/></p>
                        </div>
                    </div>

                    <div class="oe_structure"/>
                </div>
            </t>
        </template>
    </data>

    <!--A5 Report-->
    <data noupdate="1">
        <template id="vtt_external_layout_a5">
            <t t-if="not o" t-set="o" t-value="doc"/>

            <t t-if="not company">
                <!-- Multicompany -->
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>

            <div class="header" style="font-family: Arial, Helvetica, sans-serif !important;">
                <div class="o_background_header">
                <div class="float-right">
                    <h3 class="mt0 text-right" t-field="company.report_header"/>
                </div>
                <div style="position: relative; left: 0; top: 0;">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" class="float-left" alt="Logo" style="max-width:7%; position: relative; left: 0; top: 0;"/>
                </div>
                <div class="float-left company_address" style="width:80%;">
                    <div>
                        <strong t-field="company.partner_id.name" style="font-family: Arial, Helvetica, sans-serif !important; color: #000000; font-size: 12pt;"/>
                    </div>
                    <table style="font-size: 9pt;">
                      <tr>
                        <td style="width: 10%"><strong>Address:</strong></td>
                        <td colspan="4"><span t-if="company.partner_id.street"><span t-field="company.partner_id.street"/></span><span t-if="company.partner_id.street2">, <span t-field="company.partner_id.street2"/></span><span t-if="company.partner_id.state_id">, <span t-field="company.partner_id.state_id.display_name"/></span><span t-if="company.partner_id.country_id">, <span t-field="company.partner_id.country_id.display_name"/></span></td>
                      </tr>
                      <tr>
                        <td style="width: 10%"><strong>Tel:</strong></td>
                        <td style="width: 25%"><span t-field="company.phone"/></td>
                        <td style="width: 10%"><strong>Fax:</strong></td>
                        <td style="width: 25%"/>
                        <td/>
                      </tr>
                    </table>
                </div>
                <div class="clearfix mb8"/>
                </div>
            </div>

            <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
              <!--<div class="pt-5">
                  <t t-call="web.address_layout"/>
              </div>-->
              <t t-call="web.address_layout"/>
              <t t-raw="0"/>
          </div>

            <div t-attf-class="o_company_#{company.id}_layout footer o_standard_footer">
            <div class="text-center" style="font-family: Arial, Helvetica, sans-serif !important; position: relative; overflow: visible;">
                <ul class="list-inline">
                    <li t-if="company.phone" class="list-inline-item"><i class="fa fa-phone" role="img" aria-label="Phone" title="Phone"/> <span class="o_force_ltr" t-field="company.phone"/></li>
                    <li t-if="company.email" class="list-inline-item"><i class="fa fa-at" role="img" aria-label="Email" title="Email"/> <span t-field="company.email"/></li>
                    <li t-if="company.website" class="list-inline-item"><i class="fa fa-globe" role="img" aria-label="Website" title="Website"/> <span t-field="company.website"/></li>
                    <li t-if="company.vat" class="list-inline-item"><i class="fa fa-building-o" role="img" aria-label="Fiscal number"/><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                </ul>
                <div t-field="company.report_footer"/>
                <div t-if="report_type == 'pdf'" class="text-muted">
                    Page:
                    <span class="page"/>
                    of
                    <span class="topage"/>
                </div>
            </div>
        </div>
        </template>

        <template id="vtt_report_sale_doc_a5">
            <t t-call="vtt_sale_report_template.vtt_external_layout_a5">
                <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
                <h2 class="mt0 mb8" style="font-family: Arial, Helvetica, sans-serif !important;">
                    <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                        <span t-if="doc.state not in ['draft','sent']">Order # </span>
                        <span t-if="doc.state in ['draft','sent']">Quotation # </span>
                    </t>
                    <t t-if="env.context.get('proforma', False) or is_pro_forma">
                        <span>Pro-Forma Invoice # </span>
                    </t>
                    <span t-field="doc.name"/>
                </h2>

                <table style="width: 100%; font-family: Arial, Helvetica, sans-serif !important;">
                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Customer</strong>:</td>
                    <!--<td style="width: 50%"><span t-field="doc.partner_id.display_name"/></td>-->
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.name"/></span>
                    <span t-if="not doc.partner_id.parent_id"><span t-field="doc.partner_id.name"/></span>
                    </td>
                    <td style="width: 15%"><strong>Date Ordered</strong>:</td>
                    <td style="width: 20%"><span t-esc="doc.date_order.strftime('%d/%m/%Y')"/></td>

                  </tr>

                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Address</strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.street"><span t-field="doc.partner_id.street"/></span><span t-if="doc.partner_id.street2">, <span t-field="doc.partner_id.street2"/></span><span t-if="doc.partner_id.state_id">, <span t-field="doc.partner_id.state_id.display_name"/></span><span t-if="doc.partner_id.country_id">, <span t-field="doc.partner_id.country_id.display_name"/></span></td>
                    <td style="width: 15%"><strong>Salesperson</strong>:</td>
                    <td style="width: 20%"><span t-field="doc.user_id"/></td>
                  </tr>

                  <tr style="background:white;">
                    <td style="width: 15%"><strong>Phone</strong>:</td>
                    <td style="width: 50%"><span t-if="doc.partner_id.parent_id">
                      <span t-field="doc.partner_id.parent_id.phone"/></span>
                    <span t-if="not doc.partner_id.parent_id"><span t-field="doc.partner_id.phone"/></span></td>
                    <td style="width: 15%"/>
                    <td style="width: 20%"/>
                  </tr>
                </table>

                <p/>
                <p> </p>

                <div class="page" style="font-family: Arial, Helvetica, sans-serif !important;">
                    <div class="oe_structure"/>

                    <!-- Is there a discount on at least one line? -->
                    <t t-set="display_discount" t-value="any([l.discount for l in doc.order_line])"/>

                    <table class="table table-sm o_main_table">
                        <thead>
                            <tr>
                                <!-- TODO: remove in master -->
                                <t t-set="colspan" t-value="8"/>
                                <th class="text-center" style="width:4%">STT</th>
                                <!--<th class="text-center" style="width:21%">Name</th>-->
                                <th class="text-center" style="width:40%">Description</th>
                                <th class="text-center" style="width:9%">UoM</th>
                                <th class="text-center" style="width:9%">Quantity</th>
                                <th class="text-center" style="width:11%">Unit Price</th>
                                <th t-if="display_discount" style="width:5%" class="text-right" groups="sale.group_discount_per_so_line">
                                    <span>Disc.(%)</span>
                                    <!-- TODO: remove in master -->
                                    <t t-set="colspan" t-value="colspan+1"/>
                                </th>
                                <!--<th class="text-right" style="width:10%">Taxes</th>-->
                                <th class="text-center" style="width:15%">
                                    <t groups="account.group_show_line_subtotals_tax_excluded">Amount</t>
                                    <t groups="account.group_show_line_subtotals_tax_included">Total Price</t>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="sale_tbody">

                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="r_number" t-value="0"/>

                            <t t-foreach="doc.order_line" t-as="line">

                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                <t t-set="r_number" t-value="r_number + 1"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type">
                                        <td style="text-align: center;"><span t-esc="r_number"/></td>
                                        <!--<td><span t-field="line.product_id.name"/></td>-->
                                        <td><span t-field="line.name"/></td>
                                        <td class="text-right"><span t-field="line.product_uom" groups="uom.group_uom"/></td>
                                        <td class="text-right"><span t-field="line.product_uom_qty"/></td>
                                        <td class="text-right">
                                            <span t-field="line.price_unit"/>
                                        </td>
                                        <td t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line">
                                            <span t-field="line.discount"/>
                                        </td>
                                        <!--<td class="text-right">
                                            <span t-esc="', '.join(map(lambda x: (x.name or x.description), line.tax_id))"/>
                                        </td>-->
                                        <td class="text-right o_price_total">
                                            <span t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99">
                                            <span t-field="line.name"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99">
                                            <span t-field="line.name"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or doc.order_line[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td colspan="99">
                                            <strong class="mr16">Subtotal</strong>
                                            <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix">
                        <div id="total" class="row" name="total" style="margin-right:12px;">
                            <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                                <table class="table table-sm">
                                    <tr class="border-black o_subtotal">
                                        <td style="white-space: nowrap;"><strong>Subtotal</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="doc.amount_by_group" t-as="amount_by_group">
                                        <tr style="white-space: nowrap;">
                                            <t t-if="amount_by_group[3] == 1 and doc.amount_untaxed == amount_by_group[2]">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                    <span>&amp;nbsp;<span>on</span>&amp;nbsp;<t t-esc="amount_by_group[2]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/></span>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </t>
                                            <t t-else="">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span t-esc="amount_by_group[1]" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total" style="">
                                        <td style="white-space: nowrap;"><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!--<div t-if="doc.signature" class="ml16 mr16" name="signature">
                        <div class="offset-8">
                            <strong>Signature</strong>
                        </div>
                        <div class="offset-8">
                            <img t-att-src="image_data_uri(doc.signature)" style="max-height: 4cm; max-width: 8cm;"/>
                        </div>
                        <div class="offset-8 text-center">
                            <p t-field="doc.signed_by"/>
                        </div>
                    </div>-->

                    <div class="oe_structure"/>
                </div>
            </t>
        </template>
    </data>

    <!--New layer of document for action report maintain-->
    <data>
        <template id="vtt_report_saleorder">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="vtt_sale_report_template.vtt_report_sale_doc" t-lang="doc.partner_id.lang"/>
                </t>
            </t>
        </template>
    </data>
</odoo>